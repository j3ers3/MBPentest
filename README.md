# MacBook Pro for Pentest
## ğŸ˜ˆ Introduction 
**MBPentest**ï¼Œè‡ªå·±çš„MBPé…ç½®æ‰‹å†Œ


<br>

## ğŸ¦€ 1. Githubç›¸å…³
- [awesome-mac](https://github.com/jaywcjlove/awesome-mac)
- [my-mac-os](https://github.com/nikitavoloboev/my-mac-os)
- [Best-App](https://github.com/hzlzh/Best-App)


<br>

## ğŸŒš 2. å¿«æ·æ–¹å¼ 
- æ–°å»ºæ–‡ä»¶ `é€‰ä¸­æ–‡å­— -> æ‹–å‡ºå»`
- æ–°å»ºæ ‡ç­¾ `Command + T`
- æ–°å»ºçª—å£ `Command + N`
- åˆ‡æ¢æ ‡ç­¾ `Command + Num`
- å…³é—­æ ‡ç­¾ `Command + W`
- å…¨å± `Command + Control + F`
- è®¾ç½® `Command + ,`
- åˆ é™¤æ–‡ä»¶ `Command + Delete`
- æ¸…ç©ºåƒåœ¾æ¡¶ `Shift + Command + Delete`
- é”å± `Control + Command + Q`
- æˆªæ•´ä¸ªå±å¹• `Command + Shift + 3`
- æˆªå–é€‰æ‹©åŒºåŸŸ `Command + Shift + 4`                  
- æˆªå–bar `Command + Shift + 5`
- æœ€å°åŒ–çª—å£ `Command + M`
>command + tab ç„¶åæŒ‰optionæ¥æ¢å¤æœ€å°åŒ–çš„çª—å£
- å¿«é€Ÿéšè—çª—å£ `Command + H`
- æ‰“å¼€ä¾¿ç­¾ï¼Œå¿«é€Ÿè®°å½• `å¤åˆ¶-> Command + Shift + Y`
- åœ¨å½“å‰æ–‡ä»¶å¤¹è¿›å…¥ç»ˆç«¯(è‡ªå®šä¹‰) `Command + ;`
- finder è¿›å…¥ç›®å½• `Shift + Command + G`
- home `Control + a`
- end `Control + e`
- page down `fn + down`
- page up `fn + up`
- æ˜¾ç¤ºæ¡Œé¢ `F11 or å››ğŸˆ¯ï¸åˆ†å¼€`
- æ˜¾ç¤ºæ§åˆ¶å° `å››ğŸˆ¯ï¸ğŸˆ´ï¸æ‹¢`
- æŸ¥çœ‹å­—å…¸ `ä¸‰ğŸˆ¯ï¸ç‚¹å‡»`
- å‰è¿›\åé€€ `åŒğŸˆ¯ï¸å·¦å³æ»‘`
- option+å•å‡»dockå›¾æ ‡ `æœ€å°åŒ–`

<br>

## â˜‚ï¸ 3. çƒ­é”®å·¥å…·
[SpaceLauncher](https://spacelauncherapp.com)

![space](./screenshots/spacelauncher.png)

å¿«æ·é”®|åŠŸèƒ½
-|-
é•¿æŒ‰Space|            æ˜¾ç¤ºå¿«æ·åˆ—è¡¨
Space + S|           æ‰“å¼€Sublimeåº”ç”¨
Space + I|           æ‰“å¼€Iterm2åº”ç”¨
Space + W|           æ‰“å¼€å¾®ä¿¡åº”ç”¨
Space + G|           æ‰“å¼€Googleé¡µé¢          
Space + F then D|    æ‰“å¼€ä¸‹è½½æ–‡ä»¶å¤¹
Space + F then T|    æ‰“å¼€ğŸ”§æ–‡ä»¶å¤¹

<br>

## ğŸ¥€ 4. macç‘å£«å†›åˆ€
- [Github](https://github.com/rgcr/m-cli)

### 4.1 Install
```
brew install m-cli
```

### 4.2 ä½¿ç”¨
- m help
- m battery status æ˜¾ç¤ºç”µé‡
- m wifi showpassword æ˜¾ç¤ºå½“å‰wifiå¯†ç 
- m firewall disable å…³é—­é˜²ç«å¢™
- m trash clean æ¸…ç†åƒåœ¾ç®±
- å…¶ä»–è§github

<br>

## ğŸ’¥ 5. ç»ˆç«¯é…ç½® 
ä½¿ç”¨Iterm2é…åˆzsh

- [Iterm2](https://iterm2.com/)
- zsh

### 5.1 Install oh-my-zsh
```bash
sh -c $(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)
```

### 5.2 Install zsh-autosuggestions
è¾“å…¥å‘½ä»¤æ—¶å¯æç¤ºè‡ªåŠ¨è¡¥å…¨ï¼Œç„¶åæŒ‰é”®ç›˜ â†’ å³å¯è¡¥å…¨.
```bash
git clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions
```
é…ç½®.zshrc
```
plugins=(zsh-autosuggestions)
```

### 5.3 Install zsh-syntax-highlighting
æ—¥å¸¸ç”¨çš„å‘½ä»¤ä¼šé«˜äº®æ˜¾ç¤º
```bash
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
```
é…ç½®.zshrc
```
plugins=(zsh-syntax-highlighting)
```

### 5.4 Install autojump
å®ç°ç›®å½•é—´å¿«é€Ÿè·³è½¬ï¼Œæƒ³å»å“ªä¸ªç›®å½•ç›´æ¥ j + ç›®å½•å
```bash
brew install autojump
```
é…ç½®.zshrc
```
[ -f /usr/local/etc/profile.d/autojump.sh ] && . /usr/local/etc/profile.d/autojump.sh
```

### 5.5 Install powerlineå­—ä½“
```bash
git clone https://github.com/powerline/fonts.git
cd fonts
./install.sh
```
>é€‰çš„å­—ä½“Roboto Mono Medium for Powerline 14pt

### 5.6 Install nerd-fontså­—ä½“
[Github](https://github.com/ryanoasis/nerd-fonts)


### 5.7 é…ç½®
- Keys -> Hotkey è®¾ç½® `command + l` å¿«é€Ÿæ˜¾ç¤ºå’Œéšè— iTerm

- [æå¥½çš„é…è‰²](https://github.com/mbadolato/iTerm2-Color-Schemes)

![å­—ä½“](./screenshots/iterm2-font.png)


### 5.8 sshç®¡ç†
é…ç½®profileæ–‡ä»¶,è¿›è¡Œsshç®¡ç†

![ssh](./screenshots/ssh.png)

> é…ç½®å¿«æ·é”®ï¼Œå¯åŠ¨ä¸åŒçš„çª—å£ï¼Œæˆ–command+oæ‰“å¼€profilesç•Œé¢

 
### 5.9 é…ç½®.zshrc
```bash
ZSH_THEME=ys
source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

é…ç½®alias
alias proxy_ss="export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;"
alias proxy_burp="export http_proxy=http://127.0.0.1:8080"
alias proxy_reset="unset http_proxy;unset https_proxy"
```

### 5.10 å¿«æ·é”®

å¿«æ·é”®|åŠŸèƒ½
-|-
command + l |çƒ­é”®å¯åŠ¨
command + shift + d |æ¨ªåˆ‡
command + d |ç«–åˆ‡
command + [] |åˆ‡å±
command + shift + i |å¤šçª—å£åŒæ­¥å‘½ä»¤æ‰§è¡Œ
command + o |æ‰“å¼€profilesç•Œé¢
command + t |æ‰“å¼€æ ‡ç­¾
command + 1 |åˆ‡æ¢æ ‡ç­¾


<br>

## â˜˜ï¸ 6. Homebrew 
**Homebrew**, OS X ç³»ç»Ÿä¸­æœ€å—æ¬¢è¿çš„åŒ…ç®¡ç†å·¥å…·

- [å®˜ç½‘](https://brew.sh)
- [Github](https://github.com/Homebrew/brew)
- Homebrew Cask [å®˜ç½‘](http://caskroom.io/)

### 6.1 Install
```ruby
ruby -e $(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)
```
>å®‰è£…å®Œæˆåï¼ŒHomebrew ä¼šå°†æœ¬åœ° /usr/local åˆå§‹åŒ–ä¸º git çš„å·¥ä½œæ ‘ï¼Œå¹¶å°†ç›®å½•æ‰€æœ‰è€…å˜æ›´ä¸ºå½“å‰æ‰€æ“ä½œçš„ç”¨æˆ·ï¼Œå°†æ¥ brew çš„ç›¸å…³æ“ä½œä¸éœ€è¦ sudo

### 6.2 Help
```bash
brew install         
brew cask install   
brew update
brew upgrade <package_name>
brew info <package_name> 
brew list --versions
brew cask list --versions
brew doctor
brew uninstall
brew cleanup 
brew services list
brew services start mysql
```


<br>

## ğŸ”¥ 7. Metasploit Framework 
- [Github](https://github.com/rapid7/metasploit-framework)

### 7.1 Install
#### 7.1.1 å®‰è£…rvm
```
curl -sSL https://get.rvm.io | bash -s stable
source /etc/profile.d/rvm.sh
rvm install 2.5.3
rvm use 2.5.3 --default
```

#### 7.1.2 æ”¹æº
```bash
gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/
bundle config mirror.https://rubygems.org https://gems.ruby-china.com
```

#### 7.1.3 install
```bash
git clone https://github.com/rapid7/metasploit-framework.git
brew install libxml2
brew install sqlite3
brew install postgresql
gem install bundle
bundle install
```

> è§£å†³pgå®‰è£…å¤±è´¥

```bash
sudo env ARCHFLAGS=-arch x86_64 gem install pg -v '0.20.0'
```

> è§£å†³sqlite3å®‰è£…å¤±è´¥

```bash
sudo gem install sqlite3 -v '1.3.13' -- --with-sqlite3-dir=/usr/local/opt   æŒ‡å®šsqlite3çš„è·¯å¾„
```

### 7.2 Postgresé…ç½®
#### 7.2.1 aliasé…ç½®
```bash
alias pg_start=pg_ctl -D /usr/local/var/postgres@9.6 -l /usr/local/var/postgres@9.6/server.log start
alias pg_start=pg_ctl -D /usr/local/var/postgres@9.6 -l /usr/local/var/postgres@9.6/server.log stop
```

#### 7.2.2 æ•°æ®åº“
```bash
createuser msf -P
createdb -p 5432 msfdb
psql -U msf msfdb
```

![msf](./screenshots/msf.png)


<br>

## ğŸ 8. Cobalt Strike 
- [å®˜ç½‘](https://www.cobaltstrike.com/)

### 8.1 ç®€å•ç ´è§£
```
0x01
    è§£å‹ cobaltstrike.jar
0x02 
    jad common\License.class
    å¾—åˆ° License.java
0x03
    vim License.java
    private static long life = 65535L
0x04 
    javacè¿›è¡Œç¼–è¯‘å¾—åˆ° License.class
    javac  common\License.java
0x05
    å°†License.class æ”¾å…¥cobaltstrike.jaråŸæ¥çš„ä½ç½®æ›¿æ¢
```

![cobalt](./screenshots/cobalt.png)


<br>

## ğŸ¦‹ 9. ä»£ç†æ¨¡å¼ 
### 9.1 proxychains
#### 9.1.1 Install
```bash
brew install proxychains-ng
```
#### 9.1.2 é—®é¢˜
æ— æ³•å…¨éƒ¨ç¨‹åºä»£ç†ï¼Œåªèƒ½åœ¨homebrew binç›®å½•ä¸‹çš„ç¨‹åºå¯ä»£ç†
```bash
brew link curl  --force
proxychains curl ipconfig.io
```
### 9.2 Proxifier
- [å®˜ç½‘](https://www.proxifier.com)
> å†…ç½‘ç©¿é€å¸¸ç”¨

#### 9.2.1 åºåˆ—å·
- L6Z8A-XY2J4-BTZ3P-ZZ7DF-A2Q9Cï¼ˆæºå¸¦ç‰ˆï¼‰
- 5EZ8G-C3WL5-B56YG-SCXM9-6QZAPï¼ˆæ ‡å‡†ç‰ˆï¼‰
- P427L-9Y552-5433E-8DSR3-58Z68ï¼ˆMACï¼‰

### 9.3 ShadowsocksX-NG
- [Github](https://github.com/shadowsocks/ShadowsocksX-NG)

```json
{
    "server":"0.0.0.0",
    "server_port":9999,
    "local_port":1080,
    "password":"pass",
    "timeout":600,
    "method":"aes-256-cfb"
}
```
### 9.4 ShadowsocksX-NG-R8
è€ç‰ˆæœ¬ï¼Œå…¼å®¹sså’Œssr
![ssr](./screenshots/ssr.png)

### 9.6 v2ray
- [Github](https://github.com/v2ray/v2ray-core)

### 9.7 v2rayu
æ›´åŠ æ£’çš„ä»£ç†å·¥å…·
- [Github](https://github.com/yanue/v2rayu)

<br>


## ğŸ­ 10. Parallels
Macä¸‹æœ€å¥½ç”¨çš„è™šæ‹Ÿæœº
- [å®˜ç½‘](https://parallels.com/)

### 10.1 pdå·¥å…·çš„é—®é¢˜
```bash
mount -o exec /dev/cdrom /media/cdrom
cd /media/cdrom/
sudo ./install
```

> linuxæœ€æ–°å†…æ ¸å®‰è£…pdtoolséœ€è¦ä½¿ç”¨æœ€æ–°çš„Parallels


## ğŸ¦ 11. å¼€å‘ç¯å¢ƒç›¸å…³ 

### 11.1 Sublime3
- [å®˜ç½‘](https://www.sublimetext.com/)
- [ä¸»é¢˜](https://packagecontrol.io/)

#### 11.1.1å¿«æ·é”®
å¿«æ·é”®|åŠŸèƒ½
-|-
Ctrl + `                            |æ‰“å¼€æ§åˆ¶å°
Command+Shift+P                     |æ‰“é–‹æ§åˆ¶é¢æ¿
Ctrl+P                              |æ–‡ä»¶åˆ‡æ¢é¢æ¿   
Ctrl+Command+F                      |å…¨å±                          
Opt+Commad+num                      |åˆ†å±
Ctrl+Num                            |è·³è½¬åˆ°åˆ†å±é¡µ
Ctrl+j                              |é€‰ä¸­çš„è¡Œåˆå¹¶ä¸ºä¸€è¡Œ 
Reveal in Finder                    |åœ¨finderä¸­æ‰“å¼€
é•¿æŒ‰Command                          |å‘ä¸‹å¤šè¡Œé€‰æ‹©

#### 11.1.2 Preferences.sublime-settings
```json
{
    "color_scheme": "Packages/ayu/ayu-mirage.sublime-color-scheme",
    "dpi_scale": 1.0,
    "font_face": "source code pro for Powerline",
    "font_size": 15,
    "highlight_line": true,
    "ignored_packages":
    [
    ],
    "open_files_in_new_window": false,
    "theme": "ayu-mirage.sublime-theme",
    "word_wrap": true,
    "draw_minimap_border": false,
    "always_show_minimap_viewport": false,

}
```

### 11.2 IDEA
- [å®˜ç½‘](https://www.jetbrains.com/idea/)

### 11.3 pycharm
- [å®˜ç½‘](https://www.jetbrains.com/pycharm)



<br>

## ğŸŒ¿ 12. ç›®å½•æƒ…å†µ 
- brew å®‰è£…ç¨‹åºç›®å½• `/usr/local/Cellar`  
- brew é…ç½®ç¨‹åºç›®å½• `/usr/local/etc`     
- /usr/local/Cellaré‡Œç¨‹åºçš„è½¯è¿æ¥ `/usr/local/opt`           
- dmgå®‰è£…çš„åº”ç”¨ `/Applications`            
- Xcode command line tools `/Library/Developer/CommandLineTools/usr/bin`
- iBooksä¹¦ç›®å½• `~/Library/containers/com.apple.BKAgentService/Data/Documents/iBooks/Books`
- pip `/usr/local/lib/python2.7/site-packages`
- pip3 `/usr/local/lib/python3.7/site-packages`
- å¼€æœºå¯åŠ¨ `~/Library/LaunchAgents`
- é©±åŠ¨ç›®å½• `/System/Library/Extensions`


<br>

## âš¡ï¸ 13. è‡ªåŠ¨åŒ–æ“ä½œ
- æ‰“åŒ…APP
![](./screenshots/æ‰“åŒ….png)



<br>

## ğŸƒ 14. ä¸€äº›å‘½ä»¤ 
- say å°†æ–‡æœ¬è½¬ä¸ºè¯­éŸ³
```bash
say ä½ å¥½
say -v '?' | grep zh
say -v mei-jia ä½ å¥½
say -f test.txt -o test.aif #å°†æ–‡æœ¬è½¬æ¢ä¸ºéŸ³é¢‘
```

- æ˜¾ç¤ºç›‘å¬ç«¯å£
```bash
lsof -nP -iTCP -sTCP:LISTE
netstat -an | grep LISTEN
```

- å¼€æœºå¯åŠ¨å‘½ä»¤
```bash
launchctl list
launchctl stop com.philandro.anydesk
launchctl unload com.philandro.anydesk
```

- openå‘½ä»¤
```
open .     > æ‰“å¼€å½“å‰ç›®å½•
open -e    > æ‰“å¼€ç¼–è¾‘å™¨
```


<br>

### ğŸ˜³ 15. æ‚ä¸ƒæ‚å…«çš„é—®é¢˜ 
- ç´¢å¼•
```bash
mds_stores
mdutil -a -i off
mdutil -a -i on
```

- ä¼‘çœ æ—¶æ–­ç½‘
```bash
sudo pmset -b tcpkeepalive 0  
```

- Mojaveä¸­å¼€å¯æ·±è‰²èœå•æ å’Œdockæ 
```
1. ä½¿ç”¨æµ…è‰²ä¸»é¢˜
2. defaults write -g NSRequiresAquaSystemAppearance -bool Yes
3. é€€å‡ºè´¦å·é‡æ–°ç™»å½•ï¼Œé€‰æ‹©æš—è‰²ä¸»é¢˜

> å®Œå…¨æ¢å¤æš—è‰²ä¸»é¢˜
> defaults delete -g NSRequiresAquaSystemAppearance

ç«ç‹æ‰“ä¸å¼€é—®é¢˜
defaults write org.mozilla.firefox NSRequiresAquaSystemAppearance 1
```

- Termiusé”®ç›˜é•¿å®‰é—®é¢˜
```bash
defaults write -g ApplePressAndHoldEnabled -bool false
é‡å¯
```
    
- Finder æ ‡é¢˜æ˜¾ç¤ºè·¯å¾„
```bash
defaults write com.apple.finder _FXShowPosixPathInTitle -bool TRUE;killall Finder
æ¢å¤
defaults delete com.apple.finder _FXShowPosixPathInTitle;killall Finder
```
    
- å‘½ä»¤å·¥å…·ä¸­æ–‡å˜è‹±æ–‡
```bash
sudo languagesetup
```

- chromeä½¿ç”¨æµ…è‰²æ¨¡å¼
```bash
defaults write com.google.Chrome NSRequiresAquaSystemAppearance -bool YES

defaults write com.google.Chrome NSRequiresAquaSystemAppearance -bool NO
```

<br>

![å°é¢](./screenshots/view.jpg)







